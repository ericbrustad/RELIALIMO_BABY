<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Sign in - RELIALIMO™</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="auth.css" />
    <link rel="icon" href="favicon.png" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
    <script src="env.js"></script>
  </head>
  <body>
    <main class="auth-shell" style="background: radial-gradient(ellipse at center, rgba(99, 102, 241, 0.3) 0%, rgba(26, 26, 46, 0.9) 50%, #1a1a2e 100%);">
      <header class="auth-logo" style="filter: drop-shadow(0 0 40px rgba(99, 102, 241, 0.6));">
        <img src="https://siumiadylwcrkaqsfwkj.supabase.co/storage/v1/object/public/images/reliabull%20limo%20logowhitecropped.png" 
             alt="RELIALIMO" 
             style="max-height: 140px; width: auto; max-width: 90vw;">
        <p style="font-size: 1.8rem; margin-top: 1rem; text-shadow: 0 0 20px rgba(99, 102, 241, 0.8); color: white;">Customer Portal</p>
      </header>

      <form id="login-form" class="auth-form">
        <div class="form-group">
          <label class="auth-label" for="login-email">Email</label>
          <input id="login-email" name="email" type="email" placeholder="your@email.com" required autocomplete="email" inputmode="email" autocapitalize="none" spellcheck="false" />
        </div>
        <div class="form-group">
          <label class="auth-label" for="login-password">Password</label>
          <div class="password-wrapper">
            <input id="login-password" name="password" type="password" placeholder="••••••••" required />
            <button type="button" class="password-toggle" onclick="togglePassword(this)" aria-label="Show password">
              <svg class="eye-open" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
              <svg class="eye-closed" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;">
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                <line x1="1" y1="1" x2="23" y2="23"></line>
              </svg>
            </button>
          </div>
        </div>
        <button type="submit">Sign In</button>
        <button type="button" id="forgot-toggle" class="auth-link-btn">Forgot password?</button>
      </form>

      <form id="forgot-form" class="auth-form auth-form--secondary is-hidden" hidden>
        <div class="form-group">
          <label class="auth-label" for="forgot-email">Email</label>
          <input id="forgot-email" name="email" type="email" placeholder="your@email.com" required autocomplete="email" inputmode="email" autocapitalize="none" spellcheck="false" />
        </div>
        <button type="submit">Send Reset Email</button>
        <small>We'll email you a password reset link.</small>
      </form>

      <div class="auth-divider">or</div>

      <section class="magic-link-availability" aria-live="polite">
        <div class="magic-link-status">
          <span id="magic-link-badge" class="status-chip enabled">✨ Magic Link</span>
        </div>
        <p id="magic-link-description" class="auth-hint">
          Sign in instantly with a one-time link sent to your email.
        </p>
      </section>

      <form id="magic-form" class="auth-form">
        <div class="form-group">
          <label class="auth-label" for="magic-email">Email</label>
          <input id="magic-email" name="email" type="email" placeholder="your@email.com" required autocomplete="email" inputmode="email" autocapitalize="none" spellcheck="false" />
        </div>
        <button type="submit">Send Magic Link</button>
      </form>

      <p id="msg" role="status" aria-live="polite" class="auth-message"></p>
      
      <footer class="auth-footer">
        <a href="https://relialimo.com">← Back to RELIALIMO.com</a>
      </footer>
    </main>

    <script>
      function togglePassword(btn) {
        const wrapper = btn.closest('.password-wrapper');
        const input = wrapper.querySelector('input');
        const eyeOpen = btn.querySelector('.eye-open');
        const eyeClosed = btn.querySelector('.eye-closed');
        
        if (input.type === 'password') {
          input.type = 'text';
          eyeOpen.style.display = 'none';
          eyeClosed.style.display = 'block';
          btn.setAttribute('aria-label', 'Hide password');
        } else {
          input.type = 'password';
          eyeOpen.style.display = 'block';
          eyeClosed.style.display = 'none';
          btn.setAttribute('aria-label', 'Show password');
        }
      }
    </script>
    <script type="module" src="auth.js"></script>
  </body>
</html>

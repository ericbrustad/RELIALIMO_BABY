<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#1a1a2e">
  <title>Book a Ride | RELIALIMO</title>
  <link rel="icon" href="/customers/favicon.ico">
  <link rel="manifest" href="/customers/customer-portal-manifest.json">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/customers/customer-portal.css">
  <script src="/shared/env.js"></script>
  <!-- Mapbox for location selection -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <!-- Google Maps for address autocomplete -->
  <script>
    window.googleMapsReady = false;
    function onGoogleMapsLoad() {
      window.googleMapsReady = true;
      if (window.onGoogleMapsReady) window.onGoogleMapsReady();
    }
  </script>
  <script src="/shared/env.js" id="env-loader"></script>
  <script>
    // Load Google Maps with API key from env
    (function() {
      const config = window.ENV || {};
      const apiKey = config.GOOGLE_MAPS_API_KEY;
      if (apiKey) {
        const script = document.createElement('script');
        script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places&callback=onGoogleMapsLoad`;
        script.async = true;
        script.defer = true;
        document.head.appendChild(script);
      }
    })();
  </script>
</head>
<body>
  <div id="app">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="screen active" style="background: radial-gradient(ellipse at center, rgba(99, 102, 241, 0.3) 0%, rgba(26, 26, 46, 0.9) 50%, #1a1a2e 100%);">
      <div class="loading-content">
        <div class="logo-pulse" style="filter: drop-shadow(0 0 60px rgba(99, 102, 241, 0.8)) drop-shadow(0 0 120px rgba(139, 92, 246, 0.5));"><img id="loadingLogo" src="https://siumiadylwcrkaqsfwkj.supabase.co/storage/v1/object/public/images/reliabull%20limo%20logowhitecropped.png" alt="Logo" class="favicon-logo" style="max-height: 150px; width: auto; max-width: 85vw;"></div>
        <p id="loadingSubtitle" style="font-size: 1.8rem; margin-top: 1rem; text-shadow: 0 0 20px rgba(99, 102, 241, 0.8); color: white;">Customer Portal</p>
        <div class="loading-spinner"></div>
      </div>
    </div>

    <!-- Main Portal Screen -->
    <div id="portalScreen" class="screen">
      <!-- Header -->
      <header class="portal-header">
        <div class="header-left">
          <img id="headerLogo" src="https://siumiadylwcrkaqsfwkj.supabase.co/storage/v1/object/public/images/reliabull%20limo%20logowhitecropped.png" alt="Logo" class="header-logo" style="max-height: 50px; width: auto; max-width: 40vw;">
        </div>
        <div class="header-right">
          <!-- User Menu Container (hamburger with profile, password, sign out) -->
          <div id="userMenuContainer"></div>
        </div>
      </header>

      <!-- Welcome Banner -->
      <div class="welcome-banner" id="welcomeBanner">
        <div class="welcome-greeting" id="welcomeGreeting">Welcome to Professional</div>
        <div class="welcome-name" id="welcomeName"></div>
      </div>

      <!-- Tab Navigation -->
      <nav class="tab-nav">
        <button class="tab-btn active" data-tab="book">
          <span class="tab-icon">ğŸš—</span>
          <span class="tab-label">Book</span>
        </button>
        <button class="tab-btn" data-tab="trips">
          <span class="tab-icon">ğŸ“‹</span>
          <span class="tab-label">My Trips</span>
        </button>
        <button class="tab-btn" data-tab="track">
          <span class="tab-icon">ğŸ“</span>
          <span class="tab-label">Track</span>
        </button>
        <button class="tab-btn" data-tab="account">
          <span class="tab-icon">ğŸ‘¤</span>
          <span class="tab-label">Account</span>
        </button>
      </nav>

      <!-- Tab Content -->
      <main class="tab-content">
        <!-- Book Tab -->
        <section id="bookTab" class="tab-panel active">
          <div class="booking-form-container">
            <h2 class="section-title">ğŸ“… Book Your Ride</h2>
            
            <!-- Passenger Selection -->
            <div class="form-section">
              <label class="form-label">Passenger</label>
              <div class="passenger-selector">
                <select id="passengerSelect" class="form-select">
                  <option value="self">Myself</option>
                </select>
                <button type="button" class="btn-sm btn-secondary" id="addPassengerBtn">+ New</button>
              </div>
            </div>

            <!-- Passenger Details (auto-filled) -->
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">First Name*</label>
                <input type="text" id="passengerFirstName" class="form-input" placeholder="First name">
              </div>
              <div class="form-group">
                <label class="form-label">Last Name*</label>
                <input type="text" id="passengerLastName" class="form-input" placeholder="Last name">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Phone*</label>
                <input type="tel" id="passengerPhone" class="form-input" placeholder="(555) 123-4567">
              </div>
              <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" id="passengerEmail" class="form-input" placeholder="email@example.com">
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">Number of Passengers*</label>
              <div class="passenger-count-selector">
                <button type="button" class="count-btn" id="countMinus">âˆ’</button>
                <input type="number" id="passengerCount" class="count-input" value="1" min="1" max="50">
                <button type="button" class="count-btn" id="countPlus">+</button>
              </div>
            </div>

            <!-- Date and Time -->
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">ğŸ“… Pick Up Date*</label>
                <input type="date" id="pickupDate" class="form-input">
              </div>
              <div class="form-group">
                <label class="form-label">ğŸ• Pick Up Time*</label>
                <input type="time" id="pickupTime" class="form-input">
              </div>
            </div>

            <!-- Pickup Address -->
            <div class="form-section">
              <label class="form-label">ğŸ“ Pick Up Address*</label>
              <div class="address-selector">
                <select id="pickupAddressSelect" class="form-select">
                  <option value="">- Select or enter new address -</option>
                  <option value="saved">ğŸ  My Saved Addresses</option>
                  <option value="airport">âœˆï¸ Airport Pickup</option>
                  <option value="new">ğŸ“ Enter New Address</option>
                </select>
              </div>
              
              <!-- Saved Pickup Addresses -->
              <div id="savedPickupAddresses" class="saved-addresses hidden"></div>
              
              <!-- New Pickup Address Input -->
              <div id="pickupAddressNew" class="address-input-group hidden">
                <div class="address-search-wrapper">
                  <span class="search-icon">ğŸ”</span>
                  <input type="text" id="pickupAddressInput" class="form-input address-autocomplete" 
                         placeholder="Search for business, address, or location..." data-type="pickup"
                         autocomplete="off">
                  <button type="button" class="btn-icon btn-map" id="pickupMapBtn" title="Select on map">
                    ğŸ—ºï¸
                  </button>
                </div>
                <div id="pickupAddressSuggestions" class="address-suggestions"></div>
              </div>

              <!-- Airport Pickup Details -->
              <div id="airportPickupDetails" class="airport-details hidden">
                <div class="airport-header">
                  <span class="airport-icon">âœˆï¸</span>
                  <span>Airport Pickup Details</span>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label">Airport*</label>
                    <select id="pickupAirport" class="form-select">
                      <option value="">Select Airport</option>
                    </select>
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group" style="flex: 1;">
                    <label class="form-label">Airline*</label>
                    <select id="airlineCode" class="form-select">
                      <option value="">Select Airline</option>
                      <option value="AA">American Airlines (AA)</option>
                      <option value="DL">Delta Air Lines (DL)</option>
                      <option value="UA">United Airlines (UA)</option>
                      <option value="WN">Southwest Airlines (WN)</option>
                      <option value="AS">Alaska Airlines (AS)</option>
                      <option value="B6">JetBlue Airways (B6)</option>
                      <option value="F9">Frontier Airlines (F9)</option>
                      <option value="NK">Spirit Airlines (NK)</option>
                      <option value="SY">Sun Country Airlines (SY)</option>
                      <option value="G4">Allegiant Air (G4)</option>
                      <option value="AC">Air Canada (AC)</option>
                      <option value="AF">Air France (AF)</option>
                      <option value="BA">British Airways (BA)</option>
                      <option value="LH">Lufthansa (LH)</option>
                      <option value="KL">KLM Royal Dutch (KL)</option>
                      <option value="OTHER">Other (enter manually)</option>
                    </select>
                  </div>
                  <div class="form-group" style="flex: 1;">
                    <label class="form-label">Flight Number*</label>
                    <div class="input-with-button">
                      <input type="text" id="flightNumber" class="form-input" placeholder="e.g., 1234">
                      <button type="button" id="verifyFlightBtn" class="btn-verify" title="Verify Flight">
                        âœ“
                      </button>
                    </div>
                    <p class="form-hint" id="flightNumberHint">Enter flight number without airline code</p>
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label">Scheduled Arrival Time*</label>
                    <input type="time" id="flightArrivalTime" class="form-input">
                    <p class="form-hint">We'll verify and update with real-time data</p>
                  </div>
                </div>
                <div id="flightVerification" class="flight-verification hidden">
                  <div class="verification-status">
                    <span class="status-icon"></span>
                    <span class="status-text"></span>
                  </div>
                  <div class="flight-info"></div>
                </div>
              </div>
            </div>

            <!-- Stops -->
            <div class="form-section">
              <div class="stops-header">
                <label class="form-label">ğŸ›‘ Stops</label>
                <button type="button" class="btn-sm btn-secondary" id="addStopBtn">+ Add Stop</button>
              </div>
              <div id="stopsContainer" class="stops-container">
                <p class="no-stops">No stops added</p>
              </div>
            </div>

            <!-- Dropoff Address -->
            <div class="form-section">
              <label class="form-label">ğŸ Drop Off Address*</label>
              <div class="address-selector">
                <select id="dropoffAddressSelect" class="form-select">
                  <option value="">- Select or enter new address -</option>
                  <option value="saved">ğŸ  My Saved Addresses</option>
                  <option value="airport">âœˆï¸ Airport Dropoff</option>
                  <option value="new">ğŸ“ Enter New Address</option>
                </select>
              </div>
              
              <!-- Saved Dropoff Addresses -->
              <div id="savedDropoffAddresses" class="saved-addresses hidden"></div>
              
              <!-- New Dropoff Address Input -->
              <div id="dropoffAddressNew" class="address-input-group hidden">
                <div class="address-search-wrapper">
                  <span class="search-icon">ğŸ”</span>
                  <input type="text" id="dropoffAddressInput" class="form-input address-autocomplete" 
                         placeholder="Search for business, address, or location..." data-type="dropoff"
                         autocomplete="off">
                  <button type="button" class="btn-icon btn-map" id="dropoffMapBtn" title="Select on map">
                    ğŸ—ºï¸
                  </button>
                </div>
                <div id="dropoffAddressSuggestions" class="address-suggestions"></div>
              </div>

              <!-- Airport Dropoff Details -->
              <div id="airportDropoffDetails" class="airport-details hidden">
                <div class="airport-header">
                  <span class="airport-icon">âœˆï¸</span>
                  <span>Airport Dropoff Details</span>
                </div>
                <div class="form-group">
                  <label class="form-label">Airport*</label>
                  <select id="dropoffAirport" class="form-select">
                    <option value="">Select Airport</option>
                  </select>
                </div>
                <!-- Optional Flight Details Section -->
                <div class="optional-flight-section" style="margin-top: 12px; padding: 12px; background: rgba(99, 102, 241, 0.08); border-radius: 10px; border: 1px dashed rgba(99, 102, 241, 0.25);">
                  <div id="dropoffFlightToggle" style="display: flex; align-items: center; gap: 8px; cursor: pointer; color: #6366f1;" onclick="toggleDropoffFlightDetails()">
                    <span style="font-size: 14px;">ğŸ›«</span>
                    <span style="font-size: 14px; font-weight: 500;">Add flight details</span>
                    <span id="dropoffFlightArrow" style="margin-left: auto; transition: transform 0.2s;">â–¼</span>
                  </div>
                  <p style="font-size: 12px; color: rgba(255,255,255,0.6); margin: 6px 0 0 0;">Not required, but available for your convenience</p>
                  <div id="dropoffFlightFields" class="hidden" style="margin-top: 12px;">
                    <div class="form-group" style="margin-bottom: 0;">
                      <label class="form-label" style="font-size: 13px;">Flight Number <span class="optional-tag">(optional)</span></label>
                      <input type="text" id="dropoffFlightNumber" class="form-input" placeholder="e.g., AA567">
                      <p class="form-hint" style="font-size: 11px;">Helps us time your arrival at the airport</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Special Instructions -->
            <div class="form-section">
              <label class="form-label">ğŸ“ Special Instructions</label>
              <textarea id="specialInstructions" class="form-textarea" 
                        placeholder="Any special requests or notes for your driver..." rows="3"></textarea>
            </div>

            <!-- Vehicle Type -->
            <div class="form-section">
              <label class="form-label">ğŸš— Vehicle Type</label>
              <div class="vehicle-type-selector" id="vehicleTypeSelector">
                <!-- Populated dynamically from vehicle_types -->
              </div>
            </div>

            <!-- Trip Type Selection -->
            <div class="form-section">
              <label class="form-label">â±ï¸ Trip Type</label>
              <div class="trip-type-selector">
                <label class="trip-type-option" id="tripTypeStandard">
                  <input type="radio" name="tripType" value="standard" checked>
                  <span class="trip-type-content">
                    <span class="trip-type-icon">ğŸ“</span>
                    <span class="trip-type-label">Point-to-Point</span>
                    <span class="trip-type-desc">Standard pickup and dropoff</span>
                  </span>
                </label>
                <label class="trip-type-option" id="tripTypeFromAirport">
                  <input type="radio" name="tripType" value="from-airport">
                  <span class="trip-type-content">
                    <span class="trip-type-icon">ğŸ›¬</span>
                    <span class="trip-type-label">From Airport</span>
                    <span class="trip-type-desc">Airport pickup + $15 MAC fee</span>
                  </span>
                </label>
                <label class="trip-type-option" id="tripTypeToAirport">
                  <input type="radio" name="tripType" value="to-airport">
                  <span class="trip-type-content">
                    <span class="trip-type-icon">ğŸ›«</span>
                    <span class="trip-type-label">To Airport</span>
                    <span class="trip-type-desc">Airport dropoff + $15 MAC fee</span>
                  </span>
                </label>
                <label class="trip-type-option" id="tripTypeHourly">
                  <input type="radio" name="tripType" value="hourly">
                  <span class="trip-type-content">
                    <span class="trip-type-icon">â°</span>
                    <span class="trip-type-label">Hourly Reservation</span>
                    <span class="trip-type-desc">Book driver by the hour</span>
                  </span>
                </label>
              </div>
              
              <!-- Hourly Options (shown when hourly is selected) -->
              <div id="hourlyOptions" class="hourly-options hidden">
                <div class="form-group">
                  <label class="form-label">Number of Hours*</label>
                  <div class="hours-selector">
                    <button type="button" class="count-btn" id="hoursMinusBtn">âˆ’</button>
                    <input type="number" id="hourlyDuration" class="count-input" value="2" min="2" max="12">
                    <button type="button" class="count-btn" id="hoursPlusBtn">+</button>
                  </div>
                  <p class="form-hint">Minimum 2 hours. Additional time can be added.</p>
                </div>
              </div>
            </div>

            <!-- Estimated Price Display -->
            <div class="price-display" id="priceDisplaySection">
              <div class="price-label">Estimated Total:</div>
              <div class="price-amount" id="estimatedPrice">--</div>
              <div class="price-hint" id="routeInfo"></div>
            </div>

            <!-- Booking Buttons -->
            <div class="booking-buttons">
              <button type="button" id="bookOneWayBtn" class="btn btn-primary btn-large">
                ğŸš— Book One Way Trip
              </button>
              <button type="button" id="bookRoundTripBtn" class="btn btn-secondary btn-large">
                ğŸ”„ Book One Way and Enter Return Trip
              </button>
            </div>
          </div>
        </section>

        <!-- My Trips Tab -->
        <section id="tripsTab" class="tab-panel">
          <h2 class="section-title">ğŸ“‹ My Trips</h2>
          <div class="trips-filter">
            <button class="filter-btn active" data-filter="upcoming">Upcoming</button>
            <button class="filter-btn" data-filter="past">Past</button>
            <button class="filter-btn" data-filter="all">All</button>
          </div>
          <div id="tripsList" class="trips-list">
            <!-- Trips loaded dynamically -->
          </div>
        </section>

        <!-- Track Tab -->
        <section id="trackTab" class="tab-panel">
          <h2 class="section-title">ğŸ“ Track Your Driver</h2>
          <div id="noActiveTrip" class="empty-state">
            <span class="empty-icon">ğŸš—</span>
            <p>No active trip to track</p>
            <p class="empty-hint">When your driver is on the way, you'll see their location here</p>
          </div>
          <div id="activeTracking" class="active-tracking hidden">
            <div class="tracking-status-bar" id="trackingStatusBar">
              <div class="status-step active" id="stepBooked">âœ“</div>
              <div class="status-connector"></div>
              <div class="status-step" id="stepOnWay">ğŸš—</div>
              <div class="status-connector"></div>
              <div class="status-step" id="stepArrived">ğŸ“</div>
              <div class="status-connector"></div>
              <div class="status-step" id="stepInProgress">ğŸ‘¤</div>
              <div class="status-connector"></div>
              <div class="status-step" id="stepComplete">âœ“</div>
            </div>
            <div class="tracking-status-text" id="trackingStatusText">
              Driver is on the way
            </div>
            <div class="tracking-eta" id="trackingETA">
              <span class="eta-label">ETA:</span>
              <span class="eta-value" id="etaValue">--</span>
            </div>
            <div class="tracking-map-container">
              <div id="trackingMap" class="tracking-map"></div>
            </div>
            <div class="driver-info-card" id="driverInfoCard">
              <div class="driver-photo">
                <span class="driver-avatar">ğŸ‘¤</span>
              </div>
              <div class="driver-details">
                <div class="driver-name" id="driverName">--</div>
                <div class="driver-vehicle" id="driverVehicle">--</div>
              </div>
              <div class="driver-actions">
                <a href="tel:" id="callDriverBtn" class="btn-icon btn-call">ğŸ“</a>
                <a href="sms:" id="textDriverBtn" class="btn-icon btn-text">ğŸ’¬</a>
              </div>
            </div>
          </div>
        </section>

        <!-- Account Tab -->
        <section id="accountTab" class="tab-panel">
          <h2 class="section-title">ğŸ‘¤ My Account</h2>
          
          <div class="account-section">
            <h3 class="subsection-title">Profile Information</h3>
            <div class="profile-card">
              <div class="form-group">
                <label class="form-label">First Name</label>
                <input type="text" id="accountFirstName" class="form-input">
              </div>
              <div class="form-group">
                <label class="form-label">Last Name</label>
                <input type="text" id="accountLastName" class="form-input">
              </div>
              <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" id="accountEmail" class="form-input" readonly>
              </div>
              <div class="form-group">
                <label class="form-label">Phone</label>
                <input type="tel" id="accountPhone" class="form-input">
              </div>
              <button type="button" class="btn btn-primary" id="saveProfileBtn">
                Save Profile
              </button>
            </div>
          </div>

          <div class="account-section">
            <h3 class="subsection-title">Saved Passengers</h3>
            <div id="savedPassengersList" class="saved-list">
              <!-- Loaded dynamically -->
            </div>
            <button type="button" class="btn btn-secondary btn-sm" id="addSavedPassengerBtn">
              + Add Passenger
            </button>
          </div>

          <div class="account-section">
            <h3 class="subsection-title">Saved Addresses</h3>
            <div id="savedAddressesList" class="saved-list">
              <!-- Loaded dynamically -->
            </div>
            <button type="button" class="btn btn-secondary btn-sm" id="addSavedAddressBtn">
              + Add Address
            </button>
          </div>

          <!-- Booking Defaults Section -->
          <div class="account-section">
            <h3 class="subsection-title">ğŸš— Booking Defaults</h3>
            <p class="section-hint">These will be pre-filled when you book a ride</p>
            
            <div class="profile-card">
              <div class="form-group">
                <label class="form-label">ğŸ  Home Address</label>
                <input type="text" id="accountHomeAddress" class="form-input address-autocomplete" 
                       placeholder="Enter your home address for quick booking">
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label class="form-label">âœˆï¸ Preferred Pickup Airport</label>
                  <select id="accountPreferredPickupAirport" class="form-select">
                    <option value="">- Select preferred airport -</option>
                  </select>
                </div>
                <div class="form-group">
                  <label class="form-label">âœˆï¸ Preferred Dropoff Airport</label>
                  <select id="accountPreferredDropoffAirport" class="form-select">
                    <option value="">- Select preferred airport -</option>
                  </select>
                </div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label class="form-label">ğŸ‘¥ Default Passengers</label>
                  <input type="number" id="accountDefaultPassengers" class="form-input" 
                         min="1" max="50" value="1">
                </div>
                <div class="form-group">
                  <label class="form-label">ğŸš™ Preferred Vehicle</label>
                  <select id="accountPreferredVehicle" class="form-select">
                    <option value="">- Select preferred vehicle -</option>
                  </select>
                </div>
              </div>
              
              <button type="button" class="btn btn-primary" id="saveBookingDefaultsBtn">
                Save Booking Defaults
              </button>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Trip Completed Overlay -->
    <div id="tripCompletedOverlay" class="overlay hidden">
      <div class="overlay-content thank-you-content">
        <div class="thank-you-header">
          <span class="thank-you-icon">ğŸ‰</span>
          <h2>Thank You!</h2>
          <p>You've arrived at your destination</p>
        </div>
        
        <div class="tip-section">
          <h3>Add a tip for your driver</h3>
          <div class="tip-options">
            <button class="tip-btn" data-tip="0">No Tip</button>
            <button class="tip-btn" data-tip="15">15%</button>
            <button class="tip-btn active" data-tip="20">20%</button>
            <button class="tip-btn" data-tip="25">25%</button>
            <button class="tip-btn" data-tip="custom">Custom</button>
          </div>
          <div id="customTipInput" class="custom-tip hidden">
            <span class="currency">$</span>
            <input type="number" id="customTipAmount" placeholder="0.00" step="0.01" min="0">
          </div>
        </div>

        <div class="comment-section">
          <h3>Leave a comment</h3>
          <textarea id="tripComment" class="form-textarea" 
                    placeholder="How was your ride?" rows="3"></textarea>
        </div>

        <div class="rating-section">
          <h3>Rate your experience</h3>
          <div class="star-rating" id="starRating">
            <span class="star" data-rating="1">â­</span>
            <span class="star" data-rating="2">â­</span>
            <span class="star" data-rating="3">â­</span>
            <span class="star" data-rating="4">â­</span>
            <span class="star" data-rating="5">â­</span>
          </div>
        </div>

        <button type="button" id="submitFeedbackBtn" class="btn btn-primary btn-large">
          Submit
        </button>

        <div class="review-link">
          <p>Enjoyed your ride?</p>
          <a href="#" id="googleReviewLink" class="btn btn-secondary" target="_blank">
            â­ Leave a Google Review
          </a>
        </div>

        <div class="thank-you-footer">
          <img id="thankYouLogo" src="https://siumiadylwcrkaqsfwkj.supabase.co/storage/v1/object/public/images/reliabull%20limo%20logowhitecropped.png" alt="Logo" class="footer-logo" style="max-height: 60px; width: auto;">
          <p class="footer-message">See you next time!</p>
          <p class="footer-company" id="thankYouCompany">RELIALIMO thanks you</p>
        </div>
      </div>
    </div>

    <!-- Map Selection Modal -->
    <div id="mapModal" class="modal hidden">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h3>ğŸ“ Select Location on Map</h3>
          <button type="button" class="btn-close" id="closeMapModal">&times;</button>
        </div>
        <div class="modal-body">
          <div id="selectionMap" class="selection-map"></div>
          <div class="selected-address" id="selectedAddress">
            <span class="address-label">Selected:</span>
            <span class="address-text" id="selectedAddressText">Tap on the map to select a location</span>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="cancelMapSelection">Cancel</button>
          <button type="button" class="btn btn-primary" id="confirmMapSelection" disabled>Confirm Location</button>
        </div>
      </div>
    </div>

    <!-- Add Passenger Modal -->
    <div id="passengerModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ğŸ‘¤ Add Passenger</h3>
          <button type="button" class="btn-close" id="closePassengerModal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label class="form-label">First Name*</label>
            <input type="text" id="newPassengerFirstName" class="form-input" placeholder="First name">
          </div>
          <div class="form-group">
            <label class="form-label">Last Name*</label>
            <input type="text" id="newPassengerLastName" class="form-input" placeholder="Last name">
          </div>
          <div class="form-group">
            <label class="form-label">Phone*</label>
            <input type="tel" id="newPassengerPhone" class="form-input" placeholder="(555) 123-4567">
          </div>
          <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" id="newPassengerEmail" class="form-input" placeholder="email@example.com">
          </div>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="savePassengerForFuture" checked>
              Save for future bookings
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="cancelPassenger">Cancel</button>
          <button type="button" class="btn btn-primary" id="confirmPassenger">Add Passenger</button>
        </div>
      </div>
    </div>

    <!-- Add Address Modal -->
    <div id="addressModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ğŸ“ Add Address</h3>
          <button type="button" class="btn-close" id="closeAddressModal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label class="form-label">Label (e.g., Home, Work)*</label>
            <input type="text" id="newAddressLabel" class="form-input" placeholder="Home">
          </div>
          <div class="form-group">
            <label class="form-label">Address*</label>
            <input type="text" id="newAddressInput" class="form-input address-autocomplete" 
                   placeholder="Start typing an address...">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="cancelAddress">Cancel</button>
          <button type="button" class="btn btn-primary" id="confirmAddress">Save Address</button>
        </div>
      </div>
    </div>

    <!-- Preferences Modal -->
    <div id="preferencesModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3>âš™ï¸ Preferences</h3>
          <button type="button" class="btn-close" id="closePreferencesModal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="pref-section">
            <h4>Notifications</h4>
            <label class="toggle-label">
              <span>SMS Status Updates</span>
              <input type="checkbox" id="prefSmsUpdates" checked>
              <span class="toggle-switch"></span>
            </label>
            <label class="toggle-label">
              <span>Email Confirmations</span>
              <input type="checkbox" id="prefEmailConfirm" checked>
              <span class="toggle-switch"></span>
            </label>
            <label class="toggle-label">
              <span>Announce Status (Voice)</span>
              <input type="checkbox" id="prefAnnounceStatus">
              <span class="toggle-switch"></span>
            </label>
          </div>
          <div class="pref-section">
            <h4>Tracking</h4>
            <label class="toggle-label">
              <span>Show Driver on Map</span>
              <input type="checkbox" id="prefShowDriverMap" checked>
              <span class="toggle-switch"></span>
            </label>
            <label class="toggle-label">
              <span>Auto-Refresh Tracking</span>
              <input type="checkbox" id="prefAutoRefresh" checked>
              <span class="toggle-switch"></span>
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" id="savePreferences">Save Preferences</button>
        </div>
      </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast" class="toast"></div>
  </div>

  <script src="/customers/customer-portal.js" type="module"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driver Rating Priority Test - RELIALIMO</title>
    <link rel="stylesheet" href="global.css">
    <style>
        .test-container {
            max-width: 1000px;
            margin: 20px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e3f2fd;
        }
        
        .test-header h1 {
            color: #1976d2;
            margin-bottom: 10px;
        }
        
        .control-panel {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .toggle-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: #ccc;
            border-radius: 15px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .toggle-switch.checked {
            background: #4caf50;
        }
        
        .toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }
        
        .toggle-switch.checked .toggle-slider {
            transform: translateX(30px);
        }
        
        .toggle-switch input {
            display: none;
        }
        
        .status-indicator {
            font-weight: bold;
            font-size: 18px;
        }
        
        .status-enabled {
            color: #4caf50;
        }
        
        .status-disabled {
            color: #f44336;
        }
        
        #driverTable table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        #driverTable th,
        #driverTable td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        #driverTable th {
            background: #1976d2;
            color: white;
            font-weight: bold;
        }
        
        #driverTable tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        #driverTable tr:hover {
            background: #e3f2fd;
        }
        
        .explanation {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 20px;
            border-left: 4px solid #4caf50;
        }
        
        .explanation h3 {
            color: #2e7d32;
            margin-bottom: 10px;
        }
        
        .explanation ul {
            margin-left: 20px;
        }
        
        .explanation li {
            margin-bottom: 5px;
        }
        
        .console-output {
            background: #1e1e1e;
            color: #fff;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <header class="test-header">
            <h1>ðŸš— Driver Rating Priority System Test</h1>
            <p>This page demonstrates how the Driver Rating Priority toggle controls driver selection order in farmout automation.</p>
        </header>
        
        <div class="explanation">
            <h3>How It Works:</h3>
            <ul>
                <li><strong>Rating Priority ON:</strong> Drivers are sent offers from rating 10 â†’ 1, with alphabetical sorting for same ratings</li>
                <li><strong>Rating Priority OFF:</strong> Drivers are sent offers in alphabetical order only (rating ignored)</li>
                <li>The toggle is controlled in: <strong>Office â†’ System Settings â†’ Farmout Automation â†’ Driver Rating Priority</strong></li>
                <li>Example: With rating priority ON, all 10-rated drivers go first (Alice, Bob), then 9-rated (Charlie), etc.</li>
            </ul>
        </div>
        
        <div class="control-panel">
            <div class="toggle-container">
                <label>Driver Rating Priority:</label>
                <div class="toggle-switch checked" onclick="toggleRatingPriority()">
                    <input type="checkbox" id="ratingToggle" checked>
                    <div class="toggle-slider"></div>
                </div>
                <span id="priorityStatus" class="status-indicator status-enabled">ENABLED</span>
            </div>
            <button onclick="runTest()" style="padding: 10px 20px; background: #1976d2; color: white; border: none; border-radius: 4px; cursor: pointer;">
                ðŸ”„ Run Test
            </button>
        </div>
        
        <div id="driverTable">
            <!-- Driver table will be populated here -->
        </div>
        
        <div id="consoleOutput" class="console-output">
            Console output will appear here...
        </div>
    </div>
    
    <script src="test-driver-rating-priority.js"></script>
    <script>
        function toggleRatingPriority() {
            const toggle = document.getElementById('ratingToggle');
            const toggleSwitch = toggle.closest('.toggle-switch');
            
            toggle.checked = !toggle.checked;
            
            if (toggle.checked) {
                toggleSwitch.classList.add('checked');
            } else {
                toggleSwitch.classList.remove('checked');
            }
            
            displayDriverTable();
        }
        
        function runTest() {
            // Capture console output
            const originalLog = console.log;
            let consoleOutput = '';
            
            console.log = function(...args) {
                consoleOutput += args.join(' ') + '\n';
                originalLog.apply(console, args);
            };
            
            // Run the test
            const results = runDriverPriorityTests();
            
            // Restore console.log
            console.log = originalLog;
            
            // Display output
            document.getElementById('consoleOutput').textContent = consoleOutput;
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            runTest();
        });
    </script>
</body>
</html>